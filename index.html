<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Super Kid Chore Quest â€“ Schedule Maker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }

    .app {
      max-width: 1100px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 18px;
      padding: 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      margin-top: 0;
      font-size: 2.1rem;
    }

    h1 span {
      font-size: 1.1rem;
      display: block;
      margin-top: 4px;
    }

    .description {
      text-align: center;
      margin-bottom: 20px;
      color: #555;
      font-size: 0.95rem;
    }

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
      align-items: flex-start;
    }

    .card {
      background: #fafafa;
      border-radius: 14px;
      padding: 14px 16px;
      border: 1px solid #eee;
      flex: 1 1 260px;
    }

    .card h2 {
      margin: 0 0 8px;
      font-size: 1.1rem;
    }

    .hero-name-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 8px;
    }

    label[for="kidName"] {
      font-weight: 600;
    }

    #kidName {
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      min-width: 160px;
    }

    .hero-note {
      font-size: 0.8rem;
      color: #777;
    }

    .chore-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
      max-height: 150px;
      overflow-y: auto;
    }

    .chore-pill {
      padding: 4px 9px;
      border-radius: 999px;
      background: #ffe6b3;
      font-size: 0.85rem;
      white-space: nowrap;
    }

    .add-chore-row {
      display: flex;
      gap: 8px;
      margin-top: 6px;
    }

    #newChoreInput {
      flex: 1;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 0.9rem;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease, opacity 0.1s ease;
    }

    button.primary {
      background: #ffb200;
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }

    button.secondary {
      background: #4a8dff;
      color: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }

    button.danger {
      background: #ff6b6b;
      color: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
    }

    button:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .schedule-card {
      margin-top: 8px;
    }

    .schedule-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .schedule-header p {
      margin: 0;
      font-size: 0.9rem;
      color: #555;
    }

    .schedule-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .schedule-wrapper {
      overflow-x: auto;
    }

    table.schedule-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      min-width: 650px;
    }

    table.schedule-table th,
    table.schedule-table td {
      border: 1px solid #e3e3e3;
      padding: 6px 8px;
      text-align: center;
    }

    table.schedule-table th {
      background: #fff5d6;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    table.schedule-table td.chore-name-cell {
      text-align: left;
      white-space: nowrap;
      background: #fffdf4;
      position: sticky;
      left: 0;
      z-index: 2;
      min-width: 150px;
    }

    .day-label {
      font-weight: 600;
    }

    .schedule-note {
      margin-top: 8px;
      font-size: 0.8rem;
      color: #777;
    }

    @media (max-width: 700px) {
      table.schedule-table {
        font-size: 0.8rem;
      }
      table.schedule-table td,
      table.schedule-table th {
        padding: 4px 5px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>
      ðŸŒŸ SUPER KID CHORE QUEST ðŸŒŸ
      <span>Build your own weekly chore schedule</span>
    </h1>
    <p class="description">
      Add or edit chores, assign them to days of the week, and save the schedule so it is waiting next time.
    </p>

    <div class="top-row">
      <!-- Kid / hero info -->
      <div class="card">
        <h2>Hero Info</h2>
        <div class="hero-name-row">
          <label for="kidName">Hero name:</label>
          <input type="text" id="kidName" placeholder="e.g. Jake the Super Kid" />
        </div>
        <p class="hero-note">
          This name will be saved along with the schedule for this browser.
        </p>
      </div>

      <!-- Chore library -->
      <div class="card">
        <h2>Chore Library</h2>
        <p style="margin: 0 0 6px; font-size: 0.85rem; color: #666;">
          These are the chores you can assign in the weekly grid. Add your own too.
        </p>
        <div id="choreList" class="chore-list">
          <!-- pills rendered by JS -->
        </div>
        <div class="add-chore-row">
          <input type="text" id="newChoreInput" placeholder="Add a custom chore (emoji welcome!)" />
          <button id="addChoreBtn" class="primary">Add</button>
        </div>
      </div>
    </div>

    <!-- Schedule builder -->
    <div class="card schedule-card">
      <div class="schedule-header">
        <div>
          <h2 style="margin: 0 0 3px;">Weekly Schedule</h2>
          <p>Create a custom plan for each day by checking which chores belong on which days.</p>
        </div>
        <div class="schedule-actions">
          <button id="saveScheduleBtn" class="secondary">Save Schedule</button>
          <button id="clearScheduleBtn" class="danger">Clear Schedule</button>
        </div>
      </div>

      <div class="schedule-wrapper">
        <table class="schedule-table" aria-label="Chore schedule table">
          <thead>
            <tr>
              <th>Chore</th>
              <th class="day-label">Mon</th>
              <th class="day-label">Tue</th>
              <th class="day-label">Wed</th>
              <th class="day-label">Thu</th>
              <th class="day-label">Fri</th>
              <th class="day-label">Sat</th>
              <th class="day-label">Sun</th>
            </tr>
          </thead>
          <tbody id="scheduleBody">
            <!-- rows rendered by JS -->
          </tbody>
        </table>
      </div>

      <p class="schedule-note">
        Your schedule is stored only on this device in your browser. To use it on another device, recreate it there.
      </p>
    </div>
  </div>

  <script>
    // Days of week
    const DAYS = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

    // Default chore set with fun names
    const DEFAULT_CHORES = [
      { id: "bed-boss", label: "ðŸ› Bed Boss" },
      { id: "sparkle-squad", label: "ðŸ¦· Sparkle Squad" },
      { id: "breakfast-buddy", label: "ðŸ¥£ Breakfast Buddy" },
      { id: "toy-tamer", label: "ðŸ§¸ Toy Tamer" },
      { id: "book-butler", label: "ðŸ“š Book Butler" },
      { id: "laundry-launcher", label: "ðŸ§º Laundry Launcher" },
      { id: "tidy-tornado", label: "ðŸš¿ Tidy Tornado" },
      { id: "trash-hero", label: "ðŸ—‘ Trash Hero (Take out the garbage)" },
      { id: "crumb-crusher", label: "ðŸ§¹ Crumb Crusher" },
      { id: "fridge-ranger", label: "ðŸ§Š Fridge Ranger" }
    ];

    const STORAGE_KEY_CHORES = "superKidChores";
    const STORAGE_KEY_SCHEDULE = "superKidSchedule";

    const kidNameInput = document.getElementById("kidName");
    const choreListEl = document.getElementById("choreList");
    const newChoreInput = document.getElementById("newChoreInput");
    const addChoreBtn = document.getElementById("addChoreBtn");
    const scheduleBody = document.getElementById("scheduleBody");
    const saveScheduleBtn = document.getElementById("saveScheduleBtn");
    const clearScheduleBtn = document.getElementById("clearScheduleBtn");

    let chores = [];

    function loadChores() {
      const saved = localStorage.getItem(STORAGE_KEY_CHORES);
      if (saved) {
        try {
          chores = JSON.parse(saved);
          if (!Array.isArray(chores) || chores.length === 0) {
            chores = DEFAULT_CHORES.slice();
          }
        } catch (e) {
          chores = DEFAULT_CHORES.slice();
        }
      } else {
        chores = DEFAULT_CHORES.slice();
      }
    }

    function saveChores() {
      localStorage.setItem(STORAGE_KEY_CHORES, JSON.stringify(chores));
    }

    function renderChoreList() {
      choreListEl.innerHTML = "";
      if (chores.length === 0) {
        const emptyMsg = document.createElement("div");
        emptyMsg.textContent = "No chores yet. Add one below.";
        emptyMsg.style.fontSize = "0.85rem";
        emptyMsg.style.color = "#999";
        choreListEl.appendChild(emptyMsg);
        return;
      }

      chores.forEach(chore => {
        const pill = document.createElement("div");
        pill.className = "chore-pill";
        pill.textContent = chore.label;
        choreListEl.appendChild(pill);
      });
    }

    function renderScheduleTable() {
      scheduleBody.innerHTML = "";

      chores.forEach(chore => {
        const tr = document.createElement("tr");

        const nameTd = document.createElement("td");
        nameTd.className = "chore-name-cell";
        nameTd.textContent = chore.label;
        tr.appendChild(nameTd);

        DAYS.forEach(day => {
          const td = document.createElement("td");
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.dataset.choreId = chore.id;
          checkbox.dataset.day = day;
          td.appendChild(checkbox);
          tr.appendChild(td);
        });

        scheduleBody.appendChild(tr);
      });
    }

    function addChore() {
      const text = newChoreInput.value.trim();
      if (!text) return;
      const id = "chore-" + Date.now();
      chores.push({ id, label: text });
      newChoreInput.value = "";
      saveChores();
      renderChoreList();
      renderScheduleTable();
      // After re-rendering, re-apply previous saved schedule if any
      loadAndApplySchedule();
    }

    function saveSchedule() {
      const kidName = kidNameInput.value.trim();
      const checked = Array.from(
        document.querySelectorAll("#scheduleBody input[type='checkbox']:checked")
      );

      const assignments = checked.map(cb => ({
        choreId: cb.dataset.choreId,
        day: cb.dataset.day
      }));

      const payload = { kidName, assignments };
      localStorage.setItem(STORAGE_KEY_SCHEDULE, JSON.stringify(payload));

      saveScheduleBtn.textContent = "Saved!";
      saveScheduleBtn.disabled = true;
      setTimeout(() => {
        saveScheduleBtn.textContent = "Save Schedule";
        saveScheduleBtn.disabled = false;
      }, 1000);
    }

    function clearSchedule() {
      if (!confirm("Clear all chore assignments for this week?")) return;

      document
        .querySelectorAll("#scheduleBody input[type='checkbox']")
        .forEach(cb => (cb.checked = false));

      const kidName = kidNameInput.value.trim();
      const payload = { kidName, assignments: [] };
      localStorage.setItem(STORAGE_KEY_SCHEDULE, JSON.stringify(payload));
    }

    function loadAndApplySchedule() {
      const saved = localStorage.getItem(STORAGE_KEY_SCHEDULE);
      if (!saved) return;

      try {
        const data = JSON.parse(saved);
        if (data.kidName) {
          kidNameInput.value = data.kidName;
        }

        if (Array.isArray(data.assignments)) {
          data.assignments.forEach(assign => {
            const selector =
              "#scheduleBody input[type='checkbox'][data-chore-id='" +
              assign.choreId +
              "'][data-day='" +
              assign.day +
              "']";
            const cb = document.querySelector(selector);
            if (cb) cb.checked = true;
          });
        }
      } catch (e) {
        // ignore errors and start fresh
      }
    }

    // Event listeners
    addChoreBtn.addEventListener("click", addChore);
    newChoreInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addChore();
      }
    });

    saveScheduleBtn.addEventListener("click", saveSchedule);
    clearScheduleBtn.addEventListener("click", clearSchedule);

    // Init
    loadChores();
    renderChoreList();
    renderScheduleTable();
    loadAndApplySchedule();
  </script>
</body>
</html>

